# 2. C Fundamental

이번 챕터에서는 가장 간단한 프로그램을 작성하는 데에도 필요한 몇가지 기초 개념에 대해 학습힌다. 이후의 챕터부터 이 주제를 매우 자세하게 다뤄볼 것이다.

## 2.1 Writing a Simple Program

몇몇 언어로 작성된 프로그램에 반해서, C 프로그램은 **Boilerplate**를 필요로 하기 때문에 완성된 프로그램은 몇 줄로 줄어들 수 있다.

### Printing a Pun
**K&R**의 첫 프로그램은 **Hello, World**를 출력하는 매우 짧은 프로그램이다. 우리는 썰렁한 말장난을 하나 출력해보자.

    To C, or not to C: that is the questions. 

**pun.c**이라는 다음 프로그램은 이 메시지를 출력한다.

```c
#include <stdio.h>

int main(void)
{
    printf("To C, or not to C: that is the questions.\n")'
    return 0;
}
```

```c
#include <stdio.h>
```
이 줄은 **C의 표준 입출력 라이브러리**의 정보를 포함시키기 위해 빠져서는 안된다.

프로그램의 실행가능한 코드는 main 프로그램을 의미하는 **main**의 내부에 넣는다. main내부에 있는 유일한 줄은 메시지를 출력하는 명령이다.

**printf** 함수는 **표준 입출력 라이브러리**에 있는 정형화된 출력을 만드는 함수이다. **\n**이라는 코드는 **printf**함수에 메시지를 출력한 후 다음 줄로 넘어가라고 말한다.

```c
return 0;
```
이 줄은 프로그램이 종료될 때 운영체제에 0 값을 반환하라고 지시한다.

### Compiling and Linking

**pun.c**가 굉장히 간결하지만 이를 실행시키는 것은 예상보다 더 많은 노력이 필요하다.

먼저, 우리는 **pun.c**라는 이름으로 프로그램을 포함하는 파일을 만들어야한다. (아무 텍스트 에디터로 할 수 있다)
파일의 이름은 상관 없지만, 확장자인 **.c**는 종종 컴파일러가 요구한다.

다음은, 프로그램을 장치가 실행할 수 있는 형식으로 변환해야한다. C 프로그램은 주로 다음의 세가지 단계를 거친다.
1. 전처리(Preprocessing)
    - 프로그램은 우선 **전처리기**(Preprocessor)에게 넘겨진다. 전처리기는 **지시어**(Directive)라고 불리는 #으로 시작하는 명령을 따른다. 전처리기는 편집기와도 같다. 이는 프로그램에 무언가를 더하거나 수정을 가한다. 
2. 컴파일(Compile)
    - 수정된 프로그램은 이제 **컴파일러**(Compiler)에게 넘겨진다. 컴파일러는 이를 **기계어 명령**(Machine Instruction)으로 변역된다 (**Object Code**). 그러나 아직 프로그램은 실행될 준비가 되지 않았다.
3. 링크(Link)
    - 마지막으로 **링커**(Linker)가 컴파일러가 만들어낸 **Object Code**와 완전한 실행 프로그램을 만드는데 필요한 추가 코드를 합친다. 이 추가 코드는 프로그램에서 사용되는 **printf**같은 라이브러리 함수를 포함한다.

다행히, 이 과정은 주로 자동화되므로 너무 어렵게 찾아보지 않아도 된다. 사실, 전처리기는 주로 컴파일러와 합쳐져 있다.

컴파일과 링크를 위한 명령어는 컴파일러와 운영체제에 따라 다양하다. **UNIX**상에서 주로 쓰는 C 컴파일러는 **cc**라고 한다. **GCC** 컴파일러는 유명한 C 컴파일러 중 하나로, **LINUX**에서 배포되었지만 다른 많은 플랫폼에서도 사용가능하다. **GCC**의 사용은 **UNIX cc**컴파일러와 비슷하다.

**참고 : 책에 나온 cc 설명을 gcc로 수정해서 기록했습니다. 둘의 사용이 비슷하고 우리는 gcc를 사용하니까요!**

  **pun.c**를 컴파일하고 링크하기 위해서는 터미널에 다음과 같이 입력한다.
```
$ gcc pun.c
```
**gcc**를 이용할 때 링크는 자동적으로 수행되므로 따로 링크 명령을 할 필요없다.

프로그램을 링크하고 나면 **gcc**는 기본값으로 **a.out**이라는 이름의 실행가능한 프로그램을 남긴다. **gcc**는 많은 옵션을 가지고 있는데, 이 중 하나가 **-o** 옵션이다. 이 옵션은 실행가능한 프로그램을 포함하는 파일의 이름을 정할 수 있게 해준다. 예를 들어 **pun.c**의 실행가능한 버젼의 이름을 **pun**이라고 하고 싶으면 다음을 입력한다.
```
$ gcc -o pun pun.c
```

### Integrated Development Environments

지금까지는 터미널에서 컴파일러를 사용한다고 가정했다. 다른 대안은 **통합 개발 환경**(Integrated Development Environments, IDE)를 사용하는 것이다. 이는 편집, 컴파일, 링크, 실행, 디버그를 한 곳에서 모두 할 수 있는 소프트웨어 패키지이다. **IDE**의 요소들은 협업을 위해 설계되었다. 예를 들어, 프로그램에 오류가 발견되면 오류가 있는 줄을 하이라이트하여 나열해 줄 수 있다. **IDE**의 종류가 너무 많으므로, 이 책에서는 다루지 않을 것이다. 사용중인 플랫폼에서 **IDE**들을 사용할 수 있는지 확인하기를 추천한다.

## 2.2 The General Form of a Simple Program

간단한 C 프로그램은 다음의 형태를 가진다.

``` c
directives

int main(void)
{
    statements
}
```

C는 중괄호 **{, }**를 다른 몇몇 언어들이 **begin**, **end** 같은 단어를 사용하는 것처럼 사용한다. 이는 C의 일반적인 견해를 보여준다. C는 축약과 특별한 기호에 매우 의존한다. 이는 C 프로그래머가 간결한 이유이다.

매우 간단한 C 프로그램마저도 이 세가지 중요한 특징을 따른다.
1. 지시어(Directive)
    - 컴파일에 앞서 프로그램을 수정하여 명령을 편집한다.
2. 함수(Function)
    - 이름이 있는 실행 가능한 코드의 블록. **main**이 그 예시이다.
3. 문장(Statement)
    - 프로그램이 실행될 때 수행되는 명령들

### Directives

C가 컴파일되기 전에 전처리기가 첫번째로 수정한다. 전처리기를 위한 명령들을 **지시어**(Directive)라고 한다. 지금 당장은 **#include** 지시어에만 관심이 있다. **pun.c**는 다음으로 시작한다.
```c
#include <stdio.h>
```
이 지시어 문장은 <stdio.h>에 있는 정보가 컴파일 되기 전에 프로그램에 **포함**된다는 것을 의미한다. <stdio.h>는 C의 표준 입출력 라이브러리에 대한 정보를 담고 있다. C는 <stdio.h>같은 **헤더**(header)를 많이 가지고 있으며 각각 표준 라이브러리의 일부에 대한 정보를 담고 있다. 우리가 <stdio.h>를 포함해야하는 이유는 다른 프로그래밍 언어와 다르게 C는 내장된 **읽고 쓰는** 명령어가 없기 때문이다.

지시어는 항상 #로 시작하여 C 프로그램의 다른 요소들과 구별된다. 기본적으로 지시어들은 한줄로 되어있다. 지시어의 끝에는 세미콜론이나 다른 특별한 마커가 붙지 않는다.

### Functions

**함수**(Function)은 다른 프로그래밍 언어의 **Procedures**와 **Subroutines**와 같다. 이들은 프로그램들이 만들어지는 구성요소이다. 사실 C 프로그램은 함수들의 집합에 지나지 않는다. 함수들은 두가지로 나눠진다. **프로그래머가 작성한 것**과 **C 구현의 일부로 제공되는 것**이다. 나중에 이를 **라이브러리 함수**(Library function)이라고 언급할 것이다. 왜냐하면 이들이 컴파일러와 제공되는 함수들의 **라이브러리**에 속하기 때문이다.

함수라는 용어는 수학에서 유래했다. C는 함수라는 용어를 더욱 느슨하게 사용한다. C에서 함수는 **이름이 있는 그룹화된 문장들의 나열**이다. 몇몇 함수는 값을 계산하고 몇몇은 그렇지 않다. 값을 계산하는 함수는 반환할 값을 명시하기 위해 **return**문을 사용한다. 

C 프로그램이 많은 함수들로 이루어져 있을지라도, **main**함수 만이 필수적이다. **main**함수는 프로그램이 실행되면 자동적으로 호출된다는 점에서 특별하다.

**[주의] main이라는 이름은 중요하다. begin이나 start, 심지어 MAIN으로도 바뀌어서는 안된다.**

**main**함수는 값을 반환한다. 이 값은 프로그램이 종료될 때 운영체제에게 전달되는 상태 코드이다. **pun.c** 프로그램을 다시 한번 살펴보자.

```c
#include <stdio.h>

int main(void)
{
    printf("To C, or not to C: that is the questions.\n")'
    return 0;
}
```

**main** 바로 앞에 있는 **int**는 **main**함수가 정수 값을 반환한다는 것을 가르킨다. 괄호안에 **void**는 **main**함수가 인자를 가지고 있지 않다는 것을 가르킨다.

```c
return 0;
```
이 문장은 두가지 효과가 있다. 첫번째로, **main**함수를 끝낸다(즉, 프로그램을 종료한다). 그리고 **main**함수가 0 값을 반환한다는 것을 의미한다. 이제부터 **main**함수는 항상 정상적인 프로그램 종료를 의미하는 0 값을 반환하도록 한다.

만약 **main**함수 끝에 **return**문이 없어도 프로그램은 종료될 것이다. 하지만 많은 컴파일러들은 주의 메시지를 띄운다(이 함수는 정수를 반환하기로 되어있지만 그러지 않았으므로).

### Statements

**문장**(Statement)
